// SPDX-License-Identifier: MIT
// Metaline Contracts (IUniversalNFT.sol)

pragma solidity ^0.8.0;

import "@openzeppelin/contracts/token/ERC721/IERC721.sol";

struct UniversalNFTData {
    string appid; // application id
    uint256[] fixdata; // token data that can't modify
    uint256[] nftdata; // token data
}

interface IUniversalNFT is IERC721 {

    /**
    * @dev emit when new token has been minted
    *
    * @param to owner of new token
    * @param tokenId new token id
    */
    event UniversalNFTMint(address indexed to, uint256 indexed tokenId, UniversalNFTData nftdata);
    
    /**
    * @dev emit when token data modified
    *
    * @param tokenId token id
    * @param nftdata token data
    */
    event UniversalNFTModified(uint256 indexed tokenId, uint256[] nftdata);
    
    /**
    * @dev emit when token data modified
    *
    * @param tokenId token id
    * @param index token data index
    * @param nftdata token data
    */
    event UniversalNFTSingleModified(uint256 indexed tokenId, uint32 index, uint256 nftdata);

    
    /**
     * @dev Creates a new token for `to`, emit {UniversalNFTMint}. Its token ID will be automatically
     * assigned (and available on the emitted {IERC721-Transfer} event), and the token
     * URI autogenerated based on the base URI passed at construction.
     *
     * See {ERC721-_mint}.
     *
     * Requirements:
     *
     * - the caller must have the `MINTER_ROLE`.
     *
     * @param to new token owner address
     * @param data token data
     * @return id new token id
     */
    function mint(address to, UniversalNFTData memory data) external returns(uint256 id);
    function mintFixedID(uint256 id, address to, UniversalNFTData memory data) external returns (uint256);

    /**
     * @dev modify token data
     *
     * @param tokenId token id
     * @param nftdata token data
     */
    function modNftData(uint256 tokenId, uint256[] memory nftdata) external;

    /**
     * @dev modify token data
     *
     * @param tokenId token id
     * @param index token data index
     * @param nftdata token data
     */
    function modSingleNftData(uint256 tokenId, uint32 index, uint256 nftdata) external;

    /**
     * @dev get token data
     *
     * @param tokenId token id
     * @param data token data
     */
    function getNftData(uint256 tokenId) external view returns(UniversalNFTData memory data);
}